{"version":3,"sources":["file:///Users/naushad/dinoChrome/assets/scripts/gamePlay.ts"],"names":["_decorator","Component","Node","Vec3","Prefab","instantiate","UITransform","Intersection2D","Label","Color","ccclass","property","GamePlay","Number","startTheGame","node","getChildByName","active","getComponent","string","color","setTimeout","initScore","scriptGet","startJump","addAndMoveObstacles","schedule","updateScore","time","popTime","popped","arrayOfObstacles","shift","cp","getPosition","setPosition","y","usedObstacles","push","updatePosOfUsedObstacles","length","forEach","element","currPos","console","log","x","rectRect","getBoundingBoxToWorld","unschedule","jumpTween","stop","restartGame","curPos","dinoBoundingBox","start","vecX","cactus","i","maxNoOfObstacles","j","Math","floor","random","cactusPrefab","addChild","onLoad"],"mappings":"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","sourcesContent":["\r\nimport { _decorator, Component, Node, SpriteFrame, systemEvent, SystemEvent, KeyCode, Vec3, Prefab, instantiate, CCInteger, UITransform, UIComponent, UIModelComponent, Intersection2D, Label, director, Button, SystemEventType, UIOpacityComponent, Color, color, LabelComponent, Script, tween } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**\r\n * Predefined variables\r\n * Name = GamePlay\r\n * DateTime = Wed Sep 08 2021 14:26:45 GMT+0530 (India Standard Time)\r\n * Author = alokraj0024\r\n * FileBasename = gamePlay.ts\r\n * FileBasenameNoExtension = gamePlay\r\n * URL = db://assets/scripts/gamePlay.ts\r\n * ManualUrl = https://docs.cocos.com/creator/3.3/manual/en/\r\n *\r\n */\r\n \r\n@ccclass('GamePlay')\r\nexport class GamePlay extends Component {\r\n    // [1]\r\n    // dummy = '';\r\n\r\n    // [2]\r\n    // @property\r\n    // serializableDummy = 0;\r\n\r\n    // GENERATE A RANDOM NUMBER IN RANGE\r\n    // Math.floor(Math.random() * (max - min + 1)) + min;\r\n\r\n    @property(Node)\r\n    cactus : Node = null;\r\n\r\n    @property(Prefab)\r\n    cactusPrefab : Prefab[] = [];\r\n\r\n    @property(Number)\r\n    maxNoOfObstacles : number = 0;\r\n\r\n    vecX : any;\r\n    arrayOfObstacles : any =  [];\r\n    usedObstacles : any = [];\r\n    initScore = 0;\r\n    dinoBoundingBox : any;\r\n    obsBoundingBox : any;\r\n    time = 0;\r\n    popTime = 60;\r\n    birdPos : any;\r\n    scriptGet : any;\r\n   \r\n    startTheGame()\r\n    {\r\n        this.node.getChildByName('restart').active = false;\r\n        this.node.getChildByName('GameOver').getComponent(Label).string = 'Game Started';\r\n        this.node.getChildByName('GameOver').getComponent(Label).color = new Color(0,1200,0);\r\n        setTimeout( () => {\r\n            this.node.getChildByName('GameOver').active = false;\r\n            this.node.getChildByName('GameOver').getComponent(Label).string = 'Game Over !';\r\n            this.node.getChildByName('GameOver').getComponent(Label).color = new Color(255,0,0);\r\n        },1000)\r\n        this.initScore = 0;\r\n        this.scriptGet.startJump = true;\r\n        this.addAndMoveObstacles();\r\n        this.schedule(this.updateScore,0.3);\r\n        this.schedule(this.addAndMoveObstacles,0.001);\r\n    }\r\n\r\n    updateScore()\r\n    {\r\n        this.initScore+=2;\r\n        this.node.getChildByName('currentScore').getComponent(Label).string =`Score : ${this.initScore}`;\r\n    }\r\n\r\n    addAndMoveObstacles(){\r\n        this.time++;\r\n        if(this.popTime == this.time){\r\n            this.time = 0;\r\n            let popped = this.arrayOfObstacles.shift();\r\n            let cp = popped.getPosition();\r\n            popped.setPosition(new Vec3(550.527,cp.y,1));\r\n            this.usedObstacles.push(popped);\r\n        }\r\n        this.updatePosOfUsedObstacles();\r\n    }\r\n\r\n    updatePosOfUsedObstacles(){\r\n            \r\n        if(this.usedObstacles.length > 0)\r\n        {\r\n            this.usedObstacles.forEach(element =>\r\n                {\r\n                    let currPos = element.getPosition();\r\n                    console.log('for each called');\r\n                    element.setPosition(new Vec3(currPos.x-11,currPos.y,1))\r\n                    if(element.getPosition().x < -500)\r\n                    {\r\n                        element.setPosition(new Vec3(550.527,currPos.y,1));\r\n                        console.log(element.getPosition());\r\n                        this.arrayOfObstacles.push(element);\r\n                        this.usedObstacles.shift();\r\n                    }\r\n\r\n                    if(Intersection2D.rectRect(\r\n                        this.node.getChildByName('DinoStart').getComponent(UITransform)?.getBoundingBoxToWorld(),\r\n                        element.getComponent(UITransform)?.getBoundingBoxToWorld()!\r\n                        ) == true){\r\n                            console.log('collision done');\r\n                            this.unschedule(this.addAndMoveObstacles);\r\n                            this.unschedule(this.updateScore);\r\n                            this.node.getChildByName('GameOver').active = true;\r\n                            this.node.getChildByName('restart').active = true;\r\n                            this.scriptGet.jumpTween.stop();\r\n                            this.scriptGet.startJump = false;\r\n                        }\r\n                });\r\n        }\r\n    }\r\n\r\n    restartGame()\r\n    {\r\n        console.log('button clicked');\r\n        console.log(this.usedObstacles);\r\n        this.usedObstacles.forEach(element => {\r\n            let curPos = element.getPosition();\r\n            element.setPosition(new Vec3(550.527,curPos.y,1));\r\n            this.arrayOfObstacles.push(element);\r\n        });\r\n        this.usedObstacles = [];\r\n        this.dinoBoundingBox = this.node.getChildByName('DinoStart').setPosition(new Vec3(-337.263,-200.634,1));\r\n        this.startTheGame();\r\n    }\r\n\r\n    start () {\r\n        this.vecX = this.cactus.getPosition();\r\n        for(let i=0;i<this.maxNoOfObstacles;i++)\r\n        {\r\n            let j = Math.floor(Math.random() * (this.cactusPrefab.length-1 - 0 + 1)) + 0;\r\n            this.arrayOfObstacles[i] = instantiate(this.cactusPrefab[j]);\r\n            this.node.addChild(this.arrayOfObstacles[i]);\r\n            console.log('j = ' + j);\r\n            if(j!= 6)\r\n            {\r\n                this.arrayOfObstacles[i].setPosition(new Vec3(550.527,-193.655,1));\r\n            }\r\n            else\r\n            {\r\n                console.log(' 6 detected');\r\n                this.arrayOfObstacles[i].setPosition(new Vec3(550.769,-150.304,1));\r\n            }\r\n        }\r\n        this.dinoBoundingBox = this.node.getChildByName('DinoStart').getComponent(UITransform).getBoundingBoxToWorld();\r\n        this.scriptGet = this.node.getChildByName('DinoStart').getComponent('Dino');\r\n        console.log(`test script : ${this.scriptGet}`);\r\n        this.startTheGame();\r\n    }\r\n\r\n    onLoad()\r\n    {\r\n\r\n    }\r\n    // update (deltaTime: number) {\r\n    //     // [4]\r\n    // }\r\n}\r\n\r\n/**\r\n * [1] Class member could be defined like this.\r\n * [2] Use `property` decorator if your want the member to be serializable.\r\n * [3] Your initialization goes here.\r\n * [4] Your update function goes here.\r\n *\r\n * Learn more about scripting: https://docs.cocos.com/creator/3.3/manual/en/scripting/\r\n * Learn more about CCClass: https://docs.cocos.com/creator/3.3/manual/en/scripting/ccclass.html\r\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.3/manual/en/scripting/life-cycle-callbacks.html\r\n */\r\n"]}